<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Collector Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Welcome, Collector!</h1>

    <h3>Pothole Summary</h3>
    <ul>
        <li>Total Potholes: <span th:text="${totalPotholes}"></span></li>
        <li>Repaired: <span th:text="${repaired}"></span></li>
        <li>Pending: <span th:text="${pending}"></span></li>
    </ul>

    <h3>Pothole Status Chart</h3>
    <canvas id="collectorChart" width="400" height="200"></canvas>
    <script th:inline="javascript">
        var ctx = document.getElementById('collectorChart').getContext('2d');
        var chart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['Repaired', 'Pending'],
                datasets: [{
                    label: 'Pothole Status',
                    data: [/*[[${repaired}]]*/, /*[[${pending}]]*/],
                    backgroundColor: ['#36a2eb', '#ff6384']
                }]
            },
            options: { responsive: true }
        });
    </script>

    <h3>Recent Pothole Reports</h3>
    <table border="1">
        <tr>
            <th>Road Name</th>
            <th>Latitude</th>
            <th>Longitude</th>
            <th>Depth</th>
            <th>Length</th>
            <th>Width</th>
            <th>Status</th>
        </tr>
        <tr th:each="pothole : ${potholeList}">
            <td th:text="${pothole.roadName}"></td>
            <td th:text="${pothole.latitude}"></td>
            <td th:text="${pothole.longitude}"></td>
            <td th:text="${pothole.depth}"></td>
            <td th:text="${pothole.length}"></td>
            <td th:text="${pothole.width}"></td>
            <td th:text="${pothole.status}"></td>
        </tr>
    </table>
</body>
</html>
